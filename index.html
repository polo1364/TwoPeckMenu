<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ´¾å…‹ç‚¸é›é»é¤ç³»çµ±</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      padding: 20px;
      max-width: 960px;
      margin: auto;
      background: #fffbe6;
    }
    h1, h2 {
      text-align: center;
      color: #b30000;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: #fff;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    select, input[type="number"], input[type="text"] {
      width: 100%;
      padding: 4px;
      box-sizing: border-box;
    }
    .buttons {
      text-align: center;
      margin: 20px 0;
    }
    button {
      margin: 0 8px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    #summary {
      margin-top: 20px;
    }
    .only-print {
      display: none;
      text-align: center;
      font-size: 20px;
      margin-top: 30px;
    }
    @media print {
  body * {
    display: none !important;
  }

  #summary, #summary * {
    display: block !important;
    visibility: visible !important;
  }

  #footer, #footer * {
    display: block !important;
    visibility: visible !important;
  }

  #summary {
    margin-top: 20px;
    font-family: "Microsoft JhengHei", sans-serif;
  }

  #summary table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    table-layout: auto;
  }

  #summary th, #summary td {
    border: 1px solid #000;
    padding: 6px 8px;
    font-size: 16px;
    word-break: break-word;
    white-space: normal;
    text-align: center;
    vertical-align: middle;
  }

  #summary th {
    background: #f2f2f2;
    font-weight: bold;
  }

  #footer {
    margin-top: 40px;
    text-align: center;
    font-size: 18px;
    font-family: "Microsoft JhengHei", sans-serif;
  }

  #footer p {
    margin: 4px 0;
  }
}

  </style>
</head>
<body>
  <h1>æ´¾å…‹ç‚¸é›é»é¤ç³»çµ±</h1>
  <div class="no-print">
    <table>
      <thead>
        <tr><th>åˆ†é¡</th><th>å“é …</th><th>åƒ¹æ ¼</th><th>æ•¸é‡</th><th>å‚™è¨»</th></tr>
      </thead>
      <tbody id="orderTable"></tbody>
    </table>
    <div class="buttons">
      <button onclick="addRow()">â• æ–°å¢å“é …</button>
      <button onclick="generateSummary()">ğŸ“Š çµ±è¨ˆç¸½é‡‘é¡</button>
      <button onclick="print()">ğŸ–¨ï¸ åˆ—å°</button>
      <button onclick="clearAll()">ğŸ—‘ï¸ æ¸…é™¤</button>
    </div>
  </div>
  <div id="summary"></div>
  <div id="footer" class="only-print">
    <p>å¤§ç‘ç§‘æŠ€</p>
    <p>é«˜é›„å¸‚å¤§å¯®å€é³³æ—äºŒè·¯532è™Ÿ</p>
    <p>(07)7871875</p>
  </div>
  <script>
    const menu = {
      "å¥—é¤": {
        "è„†çš®é›è…¿å…¨å®¶å¿«æ¨‚åˆ†äº«é¤(è„†çš®é›è…¿Ã—7+è„†çš®é›ç¿…Ã—2+é¦¬éˆ´è–¯x1+åœ°ç“œæ¢x1+ç”œä¸è¾£Ã—1+é£²ç“¶x1)": 489,
        "è„†çš®é›è…¿åˆ†äº«é¤(è„†çš®é›å¤§è…¿Ã—3+è„†çš®é›å°è…¿Ã—3)": 279,
        "è„†çš®é›ä¸‰è…¿è‡ªé¸é¤(è„†çš®é›ç¿…Ã—1+è„†çš®é›å¤§è…¿x1+è„†çš®é›å°è…¿x1)": 125,
        "è„†çš®é›è…¿å–®äººå¥—é¤(è„†çš®é›å¤§è…¿Ã—1+è„†çš®é›å°è…¿x1+è–¯æ¢oåœ°ç“œæ¢orç”œä¸è¾£x1+ç´…èŒ¶orç¶ èŒ¶Ã—1)": 139,
        "è„†çš®é›ç¿…åˆ†äº«é¤(è„†çš®é›ç¿…Ã—6)": 189,
        "è„†çš®é›æ’å–®äººå¥—é¤(è„†çš®é›æ’+è–¯æ¢oåœ°ç“œæ¢orç”œä¸è¾£x1+ç´…èŒ¶orç¶ èŒ¶Ã—1)": 125,
        "é›æ’ï¼‹çå¥¶å¥—é¤(è„†çš®é›æ’+çƒˆç«é»‘ç³–çç é®®å¥¶èŒ¶)": 115
      },
      "ç‚¸é›": {
        "è„†çš®é›æ’": 85,
        "è„†çš®é›è…¿æ’": 85,
        "è„†çš®é›å¡Š": 70,
        "è„†çš®é›æŸ³": 75,
        "è„†çš®é›ç¿…": 35,
        "è„†çš®é›è…¿": 50,
        "æ³°é…¥æ˜Ÿæ˜Ÿé­šï¼ˆé¯›é­šï¼‰": 60,
        "çˆ†è›‹æŸ³è‘‰é­š": 60,
        "é…¥ç‚¸ä¸‰è§’éª¨è‚‰": 65,
        "è„†çš®é­·é­š": 75,
        "è„†çš®é›è»Ÿéª¨": 70
      },
      "é£²æ–™": {
        "éŒ«è˜­ç´…èŒ¶å†°": 30,
        "å¤æ—©å‘³ç´…èŒ¶å†°": 30,
        "ç¶ èŒ¶": 30,
        "ä»™è‰ç”˜èŒ¶": 35,
        "æ´¾å…‹å¥¶èŒ¶": 45,
        "æ´¾å…‹é®®å¥¶èŒ¶": 50,
        "å¤æ—©å‘³é®®å¥¶èŒ¶": 55,
        "å¤šå¤šç¶ ": 45,
        "çƒˆç«é»‘ç³–çç å¥¶èŒ¶": 55,
        "çƒˆç«é»‘ç³–çç é®®å¥¶èŒ¶": 60,
        "çƒˆç«é»‘ç³–çç æ’å¥¶": 65,
        "å¸ƒä¸å¥¶èŒ¶": 55,
        "å¸ƒä¸é®®å¥¶èŒ¶": 60,
        "å¯å£å¯æ¨‚": 30,
        "é›ªç¢§": 30,
        "å¯å£å¯æ¨‚/æ¯": 35,
        "é›ªç¢§/æ¯": 35
      },
      "é»å¿ƒ": {
        "é¦¬åŠ›æ­èµ·å¸æ¢": 50,
        "QQåœ°ç“œçƒ": 35,
        "æ´‹è”¥åœˆ": 35,
        "é¦™é…¥å››å­£è±†": 35,
        "æ¢…å­åœ°ç“œæ¢": 35,
        "è„†çš®ç”œä¸è¾£": 35,
        "è„†çš®é¦™è‡": 35,
        "è„†çš®é›çš®": 35,
        "è„†çš®ä¸Šé‡Œè‚Œ": 35,
        "è„†çš®é›å¿ƒ": 30,
        "è„†çš®èŠ±æä¸¸": 30,
        "è„†çš®ç±³è¡€": 25,
        "è„†çš®é»‘è¼ªç‰‡": 25,
        "è„†çš®è±†å¹²": 25,
        "è„†çš®ç±³è¡€ç³•": 25,
        "é›è˜¿è””ç³•": 25
      }
    };

    const discountMap = {
      'éŒ«è˜­ç´…èŒ¶å†°': 20, 'å¤æ—©å‘³ç´…èŒ¶å†°': 20, 'ç¶ èŒ¶': 20, 'ä»™è‰ç”˜èŒ¶': 25,
      'æ´¾å…‹å¥¶èŒ¶': 35, 'æ´¾å…‹é®®å¥¶èŒ¶': 40, 'å¤æ—©å‘³é®®å¥¶èŒ¶': 45, 'å¤šå¤šç¶ ': 35,
      'çƒˆç«é»‘ç³–çç å¥¶èŒ¶': 45, 'çƒˆç«é»‘ç³–çç é®®å¥¶èŒ¶': 50, 'çƒˆç«é»‘ç³–çç æ’å¥¶': 55,
      'å¸ƒä¸å¥¶èŒ¶': 45, 'å¸ƒä¸é®®å¥¶èŒ¶': 50,
      'å¯å£å¯æ¨‚': 25, 'é›ªç¢§': 25, 'å¯å£å¯æ¨‚/æ¯': 30, 'é›ªç¢§/æ¯': 30
    };

    function addRow() {
      const row = document.createElement('tr');
      const typeSel = document.createElement('select');
      typeSel.innerHTML = `<option disabled selected>è«‹é¸åˆ†é¡</option>` + Object.keys(menu).map(c => `<option value="${c}">${c}</option>`).join('');
      const itemSel = document.createElement('select');
      itemSel.innerHTML = `<option disabled selected>è«‹å…ˆé¸åˆ†é¡</option>`;
      const priceCell = document.createElement('td');
      priceCell.textContent = "-";
      const qtyInput = document.createElement('input'); qtyInput.type = 'number'; qtyInput.min = 1; qtyInput.value = 1;
      const noteInput = document.createElement('input'); noteInput.type = 'text'; noteInput.placeholder = 'å‚™è¨»';
      typeSel.onchange = () => { itemSel.innerHTML = `<option disabled selected>è«‹é¸æ“‡å“é …</option>` + Object.keys(menu[typeSel.value]).map(i => `<option value="${i}">${i}</option>`).join(''); };
      itemSel.onchange = () => { priceCell.textContent = menu[typeSel.value][itemSel.value]; };
      row.appendChild(document.createElement('td')).appendChild(typeSel);
      row.appendChild(document.createElement('td')).appendChild(itemSel);
      row.appendChild(priceCell);
      row.appendChild(document.createElement('td')).appendChild(qtyInput);
      row.appendChild(document.createElement('td')).appendChild(noteInput);
      document.getElementById('orderTable').appendChild(row);
    }

    function generateSummary() {
      let total = 0;
      let hasChicken = false;
      const rows = document.querySelectorAll('#orderTable tr');
      let summaryHTML = '<h2>çµ±è¨ˆçµæœ</h2><table><tr><th>å“é …</th><th>å–®åƒ¹</th><th>æ•¸é‡</th><th>å°è¨ˆ</th><th>å‚™è¨»</th></tr>';
      rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const type = cells[0].querySelector('select').value;
        const item = cells[1].querySelector('select').value;
        const unitPrice = parseInt(cells[2].textContent);
        if (type === 'ç‚¸é›' && ['è„†çš®é›æ’', 'è„†çš®é›è…¿æ’'].includes(item)) hasChicken = true;
      });
      rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        const type = cells[0].querySelector('select').value;
        const item = cells[1].querySelector('select').value;
        let unitPrice = parseInt(cells[2].textContent);
        const qty = parseInt(cells[3].querySelector('input').value);
        const note = cells[4].querySelector('input').value;
        if (!item || isNaN(unitPrice) || isNaN(qty)) return;
        if (hasChicken && type === 'é£²æ–™' && discountMap[item]) {
          unitPrice = discountMap[item];
        }
        const subtotal = unitPrice * qty;
        total += subtotal;
        summaryHTML += `<tr><td>${item}</td><td>${unitPrice}</td><td>${qty}</td><td>${subtotal}</td><td>${note}</td></tr>`;
      });
      summaryHTML += `<tr><td colspan="3">ç¸½é‡‘é¡</td><td colspan="2">$${total}</td></tr></table>`;
      document.getElementById('summary').innerHTML = summaryHTML;
    }

    function clearAll() {
      document.getElementById('orderTable').innerHTML = '';
      document.getElementById('summary').innerHTML = '';
    }

    window.onload = addRow;
  </script>
</body>
</html>
